!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("THREE"));else if("function"==typeof define&&define.amd)define(["THREE"],t);else{var i="object"==typeof exports?t(require("THREE")):t(e.THREE);for(var o in i)("object"==typeof exports?exports:e)[o]=i[o]}}(window,function(e){return function(e){var t={};function i(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=4)}([function(t,i){t.exports=e},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(0);function n(e,t){return void 0===t&&(t=!0),e.needsUpdate=t,e.minFilter=o.LinearFilter,e.generateMipmaps=!1,e.flipY=!1,e}t.vector3DToScreenCoords=function(e,t,i,n){var r=window.devicePixelRatio,s=(new o.Vector3).copy(n).project(e);return[(s.x+1)/2*t*r,-(s.y-1)/2*i*r]},t.vector3FromPackedArray=function(e,t){var i=3*t;return new o.Vector3(e[i],e[i+1],e[i+2])},t.getNearFarPoints=function(e,t,i){for(var n=1/0,r=0,s=(new o.Vector3).copy(i).sub(t),a=(new o.Vector3).copy(s).normalize(),l=e.length/3,c=0,h=new o.Vector3,u=new o.Vector3,p=0;p<l;p++){h.x=e[c],h.y=e[c+1],h.z=e[c+2],c+=3,u.copy(h).sub(t);var d=a.dot(u);d<0||(r=d>r?d:r,n=d<n?d:n)}return[n,r]},t.createTextureFromCanvas=function(e){return n(new o.Texture(e))},t.createTextureFromImage=function(e,t){var i=new o.Texture(e);return e.onload=function(){i.needsUpdate=!0,t()},n(i,!1)},t.hasWebGLSupport=function(){try{var e=document.createElement("canvas");return null!=(e.getContext("webgl")||e.getContext("experimental-webgl"))}catch(e){return!1}},t.extent=function(e){for(var t=1/0,i=-1/0,o=0;o<e.length;o++){var n=e[o];n<t&&(t=n),n>i&&(i=n)}return[t,i]},t.scaleLinear=function(e,t,i){var o=t[1]-t[0],n=i[1]-i[0];return(e-t[0])/o*n+i[0]},t.scaleExponential=function(e,t,i){var o=Math.pow(t[1],Math.E)-Math.pow(t[0],Math.E),n=i[1]-i[0];return(Math.pow(e,Math.E)-t[0])/o*n+i[0]},t.packRgbIntoUint8Array=function(e,t,i,o,n){e[3*t]=i,e[3*t+1]=o,e[3*t+2]=n},t.styleRgbFromHexColor=function(e){var t=new o.Color(e);return[255*t.r|0,255*t.g|0,255*t.b|0]};var r=function(e){return 100*e+"%"};t.getDefaultPointInPolylineColor=function(e,t,i,n,s,a){var l="hsl("+(i+(n-i)*e/t)+", "+r(s)+", "+r(a)+")";return new o.Color(l)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t,i,o,n,r,s){this.pointIndices=e,this.labelStrings=t,this.scaleFactors=i,this.useSceneOpacityFlags=o,this.defaultFontSize=n,this.fillColors=r,this.strokeColors=s}}();t.LabelRenderParams=o,function(e){e[e.Perspective=0]="Perspective",e[e.Orthographic=1]="Orthographic"}(t.CameraType||(t.CameraType={}));var n=function(){return function(e,t,i,o,n,r,s,a,l,c,h,u,p,d){this.camera=e,this.cameraType=t,this.cameraTarget=i,this.screenWidth=o,this.screenHeight=n,this.nearestCameraSpacePointZ=r,this.farthestCameraSpacePointZ=s,this.backgroundColor=a,this.pointColors=l,this.pointScaleFactors=c,this.labels=h,this.polylineColors=u,this.polylineOpacities=p,this.polylineWidths=d}}();t.RenderContext=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RGB_NUM_ELEMENTS=3,t.XYZ_NUM_ELEMENTS=3,t.UV_NUM_ELEMENTS=2,t.INDEX_NUM_ELEMENTS=1,t.SCATTER_PLOT_CUBE_LENGTH=2},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(5);t.ScatterGL=o.ScatterGL},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),n=i(6),r=i(10),s=i(2),a=i(11),l=i(1),c=i(3),h=i(12),u=i(13),p=i(14),d=i(16),f=function(){function e(e,t){var i=this;void 0===t&&(t={}),this.pointColorer=null,this.sequences=[],this.renderMode="POINT",this.rotateOnStart=!0,this.selectEnabled=!0,this.showLabelsOnHover=!0,this.hoverPointIndex=null,this.selectedPointIndices=[],this.clickCallback=function(){},this.hoverCallback=function(){},this.selectCallback=function(){},this.onHover=function(e){i.hoverCallback(e),i.hoverPointIndex=e,i.updateScatterPlotAttributes(),i.renderScatterPlot()},this.onClick=function(e){i.clickCallback(e)},this.onSelect=function(e){i.selectEnabled&&(i.selectCallback(e),i.selectedPointIndices=e,i.updateScatterPlotAttributes(),i.renderScatterPlot())},this.containerElement=e,this.styles=a.makeStyles(t.styles),this.setParameters(t),this.scatterPlot=new n.ScatterPlot(e,{camera:t.camera,onClick:this.onClick,onHover:this.onHover,onSelect:this.onSelect,styles:this.styles})}return e.prototype.setParameters=function(e){void 0!==e.onClick&&(this.clickCallback=e.onClick),void 0!==e.onHover&&(this.hoverCallback=e.onHover),void 0!==e.onSelect&&(this.selectCallback=e.onSelect),void 0!==e.pointColorer&&(this.pointColorer=e.pointColorer),void 0!==e.renderMode&&(this.renderMode=e.renderMode),void 0!==e.rotateOnStart&&(this.rotateOnStart=e.rotateOnStart),void 0!==e.selectEnabled&&(this.selectEnabled=e.selectEnabled),void 0!==e.showLabelsOnHover&&(this.showLabelsOnHover=e.showLabelsOnHover)},e.prototype.render=function(e){this.updateDataset(e),this.setVisualizers(),this.rotateOnStart&&this.scatterPlot.startOrbitAnimation()},e.prototype.renderScatterPlot=function(){this.dataset&&this.scatterPlot.render()},e.prototype.setRenderMode=function(e){this.renderMode=e,this.setVisualizers(),this.updateScatterPlotAttributes(),this.updateScatterPlotPositions()},e.prototype.setTextRenderMode=function(){this.setRenderMode("TEXT"),this.renderScatterPlot()},e.prototype.setPointRenderMode=function(){this.setRenderMode("POINT"),this.renderScatterPlot()},e.prototype.setSpriteRenderMode=function(){this.dataset&&this.dataset.spriteMetadata&&(this.setRenderMode("SPRITE"),this.renderScatterPlot())},e.prototype.setSequences=function(e){this.sequences=e,this.updatePolylineAttributes(),this.setVisualizers(),this.renderScatterPlot()},e.prototype.setPanMode=function(){this.scatterPlot.setInteractionMode("PAN")},e.prototype.setSelectMode=function(){this.scatterPlot.setInteractionMode("SELECT")},e.prototype.setDimensions=function(e){var t=e<2||e>3,i=this.dataset&&e>this.dataset.dimensions;if(t||i)throw new RangeError("Setting invalid dimensionality");this.scatterPlot.setDimensions(e),this.renderScatterPlot()},e.prototype.setPointColorer=function(e){this.pointColorer=e,this.updateScatterPlotAttributes(),this.renderScatterPlot()},e.prototype.resize=function(){this.scatterPlot.resize()},e.prototype.updateDataset=function(e){this.setDataset(e),this.scatterPlot.setDimensions(e.dimensions),this.updateScatterPlotAttributes(),this.updateScatterPlotPositions(),this.renderScatterPlot()},e.prototype.startOrbitAnimation=function(){this.scatterPlot.startOrbitAnimation()},e.prototype.setDataset=function(e){this.dataset=e,this.labels3DVisualizer&&this.labels3DVisualizer.setLabelStrings(this.generate3DLabelsArray())},e.prototype.updateScatterPlotPositions=function(){var e=this.dataset;if(e){var t=this.generatePointPositionArray(e);this.scatterPlot.setPointPositions(t)}},e.prototype.updateScatterPlotAttributes=function(){var e=this.dataset;if(e){var t=this.generatePointColorArray(e),i=this.generatePointScaleFactorArray(e),o=this.generateVisibleLabelRenderParams(e);this.scatterPlot.setPointColors(t),this.scatterPlot.setPointScaleFactors(i),this.scatterPlot.setLabels(o)}},e.prototype.updatePolylineAttributes=function(){var e=this.dataset;if(e){var t=this.generateLineSegmentColorMap(e),i=this.generateLineSegmentOpacityArray(e),o=this.generateLineSegmentWidthArray(e);this.scatterPlot.setPolylineColors(t),this.scatterPlot.setPolylineOpacities(i),this.scatterPlot.setPolylineWidths(o)}},e.prototype.generatePointPositionArray=function(e){var t,i,o=[0,0];t=l.extent(e.points.map(function(e){return e[0]})),i=l.extent(e.points.map(function(e){return e[1]})),3===e.dimensions&&(o=l.extent(e.points.map(function(e){return e[2]})));var n=function(e){return Math.abs(e[1]-e[0])},r=n(t),s=n(i),a=n(o),h=Math.max(r,s,a),u=c.SCATTER_PLOT_CUBE_LENGTH/2,p=function(e,t){return[e/h*-t,t*(e/h)]},d=p(r,u),f=p(s,u),m=p(a,u),v=new Float32Array(3*e.points.length),y=0;return e.points.forEach(function(n,r){var s=e.points[r];v[y++]=l.scaleLinear(s[0],t,d),v[y++]=l.scaleLinear(s[1],i,f),3===e.dimensions?v[y++]=l.scaleLinear(s[2],o,m):v[y++]=0}),v},e.prototype.generateVisibleLabelRenderParams=function(e){var t=this.hoverPointIndex,i=this.selectedPointIndices,o=this.styles,n=i.length,r=n+(null!==t?1:0),a=new Uint32Array(r),c=new Float32Array(r),h=new Int8Array(r),u=new Uint8Array(3*r),p=new Uint8Array(3*r),d=[];c.fill(o.label.scaleDefault),h.fill(1);var f=0;if(null!==t){d.push(this.getLabelText(t)),a[f]=t,c[f]=o.label.scaleLarge,h[f]=0;var m=l.styleRgbFromHexColor(o.label.fillColorHover);l.packRgbIntoUint8Array(u,f,m[0],m[1],m[2]);var v=l.styleRgbFromHexColor(o.label.strokeColorHover);l.packRgbIntoUint8Array(p,f,v[0],v[1],v[1]),++f}for(var y=n,g=(m=l.styleRgbFromHexColor(o.label.fillColorSelected),v=l.styleRgbFromHexColor(o.label.strokeColorSelected),0);g<y;++g){var b=i[g];d.push(this.getLabelText(b)),a[f]=b,c[f]=o.label.scaleLarge,h[f]=1===y?0:1,l.packRgbIntoUint8Array(u,f,m[0],m[1],m[2]),l.packRgbIntoUint8Array(p,f,v[0],v[1],v[2]),++f}return new s.LabelRenderParams(new Float32Array(a),d,c,h,o.label.fontSize,u,p)},e.prototype.generatePointScaleFactorArray=function(e){var t=this.hoverPointIndex,i=this.selectedPointIndices,o=this.styles.point,n=o.scaleDefault,r=o.scaleSelected,s=o.scaleHover,a=new Float32Array(e.points.length);a.fill(n);for(var l=i.length,c=0;c<l;++c){a[i[c]]=r}return null!=t&&(a[t]=s),a},e.prototype.generatePointColorArray=function(e){var t=this.hoverPointIndex,i=this.pointColorer,n=this.selectedPointIndices,r=this.styles.point,s=r.colorHover,a=r.colorNoSelection,l=r.colorSelected,c=r.colorUnselected,h=n.length,u=new Float32Array(3*e.points.length),p=c,d=a;"TEXT"===this.renderMode&&(p=this.styles.label3D.colorUnselected,d=this.styles.label3D.colorNoSelection),"SPRITE"===this.renderMode&&(p=this.styles.sprites.colorUnselected,d=this.styles.sprites.colorNoSelection);var f=e.points.length,m=0;if(h>0)for(var v=new o.Color(p),y=0;y<f;++y)u[m++]=v.r,u[m++]=v.g,u[m++]=v.b;else if(i)for(y=0;y<f;++y){v=new o.Color(i(y)||d);u[m++]=v.r,u[m++]=v.g,u[m++]=v.b}else for(v=new o.Color(d),y=0;y<f;++y)u[m++]=v.r,u[m++]=v.g,u[m++]=v.b;for(f=h,v=new o.Color(l),y=0;y<f;++y){m=3*n[y];u[m++]=v.r,u[m++]=v.g,u[m++]=v.b}if(null!=t){v=new o.Color(s),m=3*t;u[m++]=v.r,u[m++]=v.g,u[m++]=v.b}return u},e.prototype.generate3DLabelsArray=function(){var e=this.dataset;if(!e)return[];for(var t=[],i=e.points.length,o=0;o<i;++o)t.push(this.getLabelText(o));return t},e.prototype.generateLineSegmentColorMap=function(e){for(var t=this.pointColorer,i=this.styles,n={},r=0;r<this.sequences.length;r++){var s=this.sequences[r],a=new Float32Array(2*(s.indices.length-1)*3),c=0;if(t)for(var h=0;h<s.indices.length-1;h++){var u=new o.Color(t(s.indices[h])),p=new o.Color(t(s.indices[h+1]));a[c++]=u.r,a[c++]=u.g,a[c++]=u.b,a[c++]=p.r,a[c++]=p.g,a[c++]=p.b}else for(h=0;h<s.indices.length-1;h++){u=l.getDefaultPointInPolylineColor(h,s.indices.length,i.polyline.startHue,i.polyline.endHue,i.polyline.saturation,i.polyline.lightness),p=l.getDefaultPointInPolylineColor(h+1,s.indices.length,i.polyline.startHue,i.polyline.endHue,i.polyline.saturation,i.polyline.lightness);a[c++]=u.r,a[c++]=u.g,a[c++]=u.b,a[c++]=p.r,a[c++]=p.g,a[c++]=p.b}n[r]=a}return n},e.prototype.generateLineSegmentOpacityArray=function(e){var t=this.selectedPointIndices,i=this.styles,o=new Float32Array(this.sequences.length);if(t.length>0){o.fill(i.polyline.deselectedOpacity);var n=this.polylineVisualizer.getPointSequenceIndex(t[0]);void 0!==n&&(o[n]=i.polyline.selectedOpacity)}else o.fill(i.polyline.defaultOpacity);return o},e.prototype.generateLineSegmentWidthArray=function(e){var t=this.selectedPointIndices,i=this.styles,o=new Float32Array(this.sequences.length);if(o.fill(i.polyline.defaultLineWidth),t.length>0){var n=this.polylineVisualizer.getPointSequenceIndex(t[0]);void 0!==n&&(o[n]=i.polyline.selectedLineWidth)}return o},e.prototype.getLabelText=function(e){var t=this.dataset;if(!t)return"";var i=t.metadata[e];return i&&null!=i.label?""+i.label:""},e.prototype.initializeCanvasLabelsVisualizer=function(){return this.canvasLabelsVisualizer||(this.canvasLabelsVisualizer=new p.ScatterPlotVisualizerCanvasLabels(this.containerElement,this.styles)),this.canvasLabelsVisualizer},e.prototype.initialize3DLabelsVisualizer=function(){return this.labels3DVisualizer||(this.labels3DVisualizer=new h.ScatterPlotVisualizer3DLabels(this.styles)),this.labels3DVisualizer.setLabelStrings(this.generate3DLabelsArray()),this.labels3DVisualizer},e.prototype.initializePointVisualizer=function(){return this.pointVisualizer||(this.pointVisualizer=new u.ScatterPlotVisualizerSprites(this.styles)),this.pointVisualizer},e.prototype.initializeSpritesheetVisualizer=function(){var e=this,t=this.styles,i=this.dataset,o=i.spriteMetadata;if(!this.spritesheetVisualizer&&o){if(!o.spriteImage||!o.singleSpriteSize)return;for(var n=i.points.length,r=new Float32Array(n),s=0;s<n;++s)r[s]=s;var a=new u.ScatterPlotVisualizerSprites(t,{spritesheetImage:o.spriteImage,spriteDimensions:o.singleSpriteSize,spriteIndices:r,onImageLoad:function(){return e.renderScatterPlot()}});a.id="SPRITE_SHEET_VISUALIZER",this.spritesheetVisualizer=a}return this.spritesheetVisualizer},e.prototype.initializePolylineVisualizer=function(){return this.polylineVisualizer||(this.polylineVisualizer=new d.ScatterPlotVisualizerPolylines),this.polylineVisualizer.setSequences(this.sequences),this.polylineVisualizer},e.prototype.setVisualizers=function(){var e=this.dataset,t=this.renderMode,i=[];if("TEXT"===t){var o=this.initialize3DLabelsVisualizer();i.push(o)}else if("POINT"===t){o=this.initializePointVisualizer();i.push(o)}else if("SPRITE"===t&&e.spriteMetadata){(o=this.initializeSpritesheetVisualizer())&&i.push(o)}if(this.sequences.length>0){o=this.initializePolylineVisualizer();i.push(o)}if(("POINT"===t||"SPRITE"===t)&&this.showLabelsOnHover){o=this.initializeCanvasLabelsVisualizer();i.push(o)}this.scatterPlot.setActiveVisualizers(i)},e.Dataset=r.Dataset,e}();t.ScatterGL=f},function(e,t,i){"use strict";var o=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}},n=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var o,n,r=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s};Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),s=i(7),a=i(2),l=i(1),c=i(9),h=new r.Vector3(.45,.9,1.6),u=new r.Vector3(0,0,0),p=new r.Vector3(0,0,4),d=new r.Vector3(0,0,0),f=function(){function e(e,t){var i=this;this.clickCallback=function(){},this.hoverCallback=function(){},this.selectCallback=function(){},this.visualizers=new Map,this.onCameraMoveListeners=[],this.height=0,this.width=0,this.dimensions=3,this.interactionMode="PAN",this.pickingTexture=new r.WebGLRenderTarget(0,0),this.orbitAnimationOnNextCameraCreation=!1,this.orbitAnimationId=null,this.worldSpacePointPositions=new Float32Array,this.pointColors=new Float32Array,this.pointScaleFactors=new Float32Array,this.polylineColors={},this.polylineOpacities=new Float32Array,this.polylineWidths=new Float32Array,this.selecting=!1,this.nearestPoint=null,this.mouseIsDown=!1,this.isDragSequence=!1,this.lastHovered=null,this.container=e,this.clickCallback=t.onClick||this.clickCallback,this.hoverCallback=t.onHover||this.hoverCallback,this.selectCallback=t.onSelect||this.selectCallback,this.styles=t.styles,this.computeLayoutValues(),this.scene=new r.Scene,this.renderer=new r.WebGLRenderer({alpha:!0,premultipliedAlpha:!1,antialias:!1}),this.renderer.setClearColor(this.styles.backgroundColor,1),this.container.appendChild(this.renderer.domElement),this.light=new r.PointLight(16772287,1,0),this.scene.add(this.light),this.rectangleSelector=new c.ScatterPlotRectangleSelector(this.container,function(e){return i.selectBoundingBox(e)},this.styles),this.addInteractionListeners(),this.setDimensions(3),this.makeCamera(t.camera),this.resize()}return e.prototype.addInteractionListeners=function(){this.container.addEventListener("mousemove",this.onMouseMove.bind(this)),this.container.addEventListener("mousedown",this.onMouseDown.bind(this)),this.container.addEventListener("mouseup",this.onMouseUp.bind(this)),this.container.addEventListener("click",this.onClick.bind(this)),window.addEventListener("keydown",this.onKeyDown.bind(this),!1),window.addEventListener("keyup",this.onKeyUp.bind(this),!1)},e.prototype.addCameraControlsEventListeners=function(e){var t=this;e.addEventListener("start",function(){t.stopOrbitAnimation(),t.onCameraMoveListeners.forEach(function(i){return i(t.camera.position,e.target)})}),e.addEventListener("change",function(){t.render()}),e.addEventListener("end",function(){})},e.prototype.makeOrbitControls=function(e,t,i){null!=this.orbitCameraControls&&this.orbitCameraControls.dispose();var o=new s.OrbitControls(e,this.renderer.domElement);o.target0=new r.Vector3(t.target[0],t.target[1],t.target[2]),o.position0=(new r.Vector3).copy(e.position),o.zoom0=t.zoom,o.zoomSpeed=.125,o.enableRotate=i,o.autoRotate=!1,o.rotateSpeed=1,i?(o.mouseButtons.LEFT=r.MOUSE.LEFT,o.mouseButtons.RIGHT=r.MOUSE.RIGHT):(o.mouseButtons.LEFT=null,o.mouseButtons.RIGHT=r.MOUSE.LEFT),o.reset(),this.camera=e,this.orbitCameraControls=o,this.addCameraControlsEventListeners(this.orbitCameraControls)},e.prototype.makeCamera=function(e){void 0===e&&(e={});var t=this.makeDefaultCameraDef(this.dimensions,e);this.recreateCamera(t),3===this.dimensions&&this.styles.axesVisible?this.add3dAxes():this.remove3dAxesFromScene()},e.prototype.makeCamera3D=function(e,t,i){var o,n=t/i;(o=new r.PerspectiveCamera(70,n,.01,100)).position.set(e.position[0],e.position[1],e.position[2]);var s=new r.Vector3(e.target[0],e.target[1],e.target[2]);o.lookAt(s),o.zoom=e.zoom,o.updateProjectionMatrix(),this.camera=o,this.makeOrbitControls(o,e,!0)},e.prototype.makeCamera2D=function(e,t,i){var o,n=new r.Vector3(e.target[0],e.target[1],e.target[2]),s=t/i,a=-1.2,l=1.2,c=-1.2,h=1.2;s>1?(a*=s,l*=s):(h/=s,c/=s),(o=new r.OrthographicCamera(a,l,h,c,-1e3,1e3)).position.set(e.position[0],e.position[1],e.position[2]),o.up=new r.Vector3(0,0,1),o.lookAt(n),o.zoom=e.zoom,o.updateProjectionMatrix(),this.camera=o,this.makeOrbitControls(o,e,!1)},e.prototype.makeDefaultCameraDef=function(e,t){void 0===t&&(t={});var i=2===e,o=i?p:h,n=i?d:u,r={orthographic:i,zoom:1,position:[o.x,o.y,o.z],target:[n.x,n.y,n.z]};return t.zoom&&(r.zoom=t.zoom),t.position&&(r.position=t.position),t.target&&(r.target=t.target),r},e.prototype.recreateCamera=function(e){e.orthographic?this.makeCamera2D(e,this.width,this.height):this.makeCamera3D(e,this.width,this.height),this.orbitCameraControls.minDistance=.05,this.orbitCameraControls.maxDistance=10,this.orbitCameraControls.update(),this.orbitAnimationOnNextCameraCreation&&this.startOrbitAnimation()},e.prototype.setInteractionMode=function(e){this.interactionMode=e,"SELECT"===e?(this.selecting=!0,this.container.style.cursor="crosshair"):(this.selecting=!1,this.container.style.cursor="default")},e.prototype.onClick=function(e,t){if(void 0===t&&(t=!0),!e||!this.selecting){if(!this.isDragSequence&&t){var i=null!=this.nearestPoint?[this.nearestPoint]:[];this.selectCallback(i),this.clickCallback(this.nearestPoint)}this.isDragSequence=!1,this.render()}},e.prototype.onMouseDown=function(e){this.isDragSequence=!1,this.mouseIsDown=!0,this.selecting?(this.orbitCameraControls.enabled=!1,this.rectangleSelector.onMouseDown(e.offsetX,e.offsetY),this.setNearestPointToMouse(e)):!e.ctrlKey&&this.sceneIs3D()&&this.orbitCameraControls.mouseButtons.ORBIT===r.MOUSE.RIGHT?(this.orbitCameraControls.mouseButtons.ORBIT=r.MOUSE.LEFT,this.orbitCameraControls.mouseButtons.PAN=r.MOUSE.RIGHT):e.ctrlKey&&this.sceneIs3D()&&this.orbitCameraControls.mouseButtons.ORBIT===r.MOUSE.LEFT&&(this.orbitCameraControls.mouseButtons.ORBIT=r.MOUSE.RIGHT,this.orbitCameraControls.mouseButtons.PAN=r.MOUSE.LEFT)},e.prototype.onMouseUp=function(e){this.selecting&&(this.orbitCameraControls.enabled=!0,this.rectangleSelector.onMouseUp(),this.render()),this.mouseIsDown=!1},e.prototype.onMouseMove=function(e){this.isDragSequence=this.mouseIsDown,this.selecting&&this.mouseIsDown?(this.rectangleSelector.onMouseMove(e.offsetX,e.offsetY),this.render()):this.mouseIsDown||(this.setNearestPointToMouse(e),this.nearestPoint!=this.lastHovered&&(this.lastHovered=this.nearestPoint,this.hoverCallback(this.nearestPoint)))},e.prototype.onKeyDown=function(e){17===e.keyCode&&this.sceneIs3D()&&(this.orbitCameraControls.mouseButtons.ORBIT=r.MOUSE.RIGHT,this.orbitCameraControls.mouseButtons.PAN=r.MOUSE.LEFT),16===e.keyCode&&(this.selecting=!0,this.container.style.cursor="crosshair")},e.prototype.onKeyUp=function(e){17===e.keyCode&&this.sceneIs3D()&&(this.orbitCameraControls.mouseButtons.ORBIT=r.MOUSE.LEFT,this.orbitCameraControls.mouseButtons.PAN=r.MOUSE.RIGHT),16===e.keyCode&&(this.selecting="PAN"===this.interactionMode,this.selecting||(this.container.style.cursor="default"),this.render())},e.prototype.getPointIndicesFromPickingTexture=function(e){if(null==this.worldSpacePointPositions)return[];var t=this.worldSpacePointPositions.length/3,i=window.devicePixelRatio||1,o=Math.floor(e.x*i),n=Math.floor(e.y*i),r=Math.max(Math.floor(e.width*i),1),s=Math.max(Math.floor(e.height*i),1),a=new Uint8Array(r*s*4);this.renderer.readRenderTargetPixels(this.pickingTexture,o,this.pickingTexture.height-n,r,s,a);for(var l=new Uint8Array(this.worldSpacePointPositions.length),c=0;c<r*s;c++){var h=a[4*c]<<16|a[4*c+1]<<8|a[4*c+2];16777215!==h&&h<t&&(l[h]=1)}var u=[];for(c=0;c<l.length;c++)1===l[c]&&u.push(c);return u},e.prototype.selectBoundingBox=function(e){var t=this.getPointIndicesFromPickingTexture(e);this.selectCallback(t)},e.prototype.setNearestPointToMouse=function(e){if(null!=this.pickingTexture){var t={x:e.offsetX,y:e.offsetY,width:1,height:1},i=this.getPointIndicesFromPickingTexture(t);this.nearestPoint=i.length?i[0]:null}else this.nearestPoint=null},e.prototype.computeLayoutValues=function(){return this.width=this.container.offsetWidth,this.height=Math.max(1,this.container.offsetHeight),[this.width,this.height]},e.prototype.sceneIs3D=function(){return 3===this.dimensions},e.prototype.remove3dAxesFromScene=function(){var e=this.scene.getObjectByName("axes");return null!=e&&this.scene.remove(e),e},e.prototype.add3dAxes=function(){var e=new r.AxesHelper;e.name="axes",this.scene.add(e)},e.prototype.setDimensions=function(e){if(2!==e&&3!==e)throw new RangeError("dimensions must be 2 or 3");this.dimensions!==e&&(this.dimensions=e,this.makeCamera())},e.prototype.getCameraPosition=function(){var e=this.camera.position;return[e.x,e.y,e.z]},e.prototype.getCameraTarget=function(){var e=this.orbitCameraControls.target;return[e.x,e.y,e.z]},e.prototype.setCameraPositionAndTarget=function(e,t){this.stopOrbitAnimation(),this.camera.position.set(e[0],e[1],e[2]),this.orbitCameraControls.target.set(t[0],t[1],t[2]),this.orbitCameraControls.update(),this.render()},e.prototype.startOrbitAnimation=function(){this.sceneIs3D()&&(null!=this.orbitAnimationId&&this.stopOrbitAnimation(),this.orbitCameraControls.autoRotate=!0,this.orbitCameraControls.rotateSpeed=7,this.updateOrbitAnimation())},e.prototype.updateOrbitAnimation=function(){var e=this;this.orbitCameraControls.update(),this.orbitAnimationId=requestAnimationFrame(function(){return e.updateOrbitAnimation()})},e.prototype.stopOrbitAnimation=function(){this.orbitCameraControls.autoRotate=!1,this.orbitCameraControls.rotateSpeed=1,null!=this.orbitAnimationId&&(cancelAnimationFrame(this.orbitAnimationId),this.orbitAnimationId=null)},e.prototype.setActiveVisualizers=function(e){var t,i,n,r,s=new Set(e.map(function(e){return e.id}));try{for(var a=o(this.visualizers.values()),l=a.next();!l.done;l=a.next()){var c=l.value;s.has(c.id)||(c.dispose(),this.visualizers.delete(c.id))}}catch(e){t={error:e}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(t)throw t.error}}try{for(var h=o(e),u=h.next();!u.done;u=h.next()){c=u.value;this.visualizers.set(c.id,c),c.setScene(this.scene),c.onResize(this.width,this.height),this.worldSpacePointPositions&&c.onPointPositionsChanged(this.worldSpacePointPositions)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}},e.prototype.disposeAllVisualizers=function(){this.visualizers.forEach(function(e){return e.dispose()}),this.visualizers.clear()},e.prototype.setPointPositions=function(e){this.worldSpacePointPositions=e,this.visualizers.forEach(function(t){return t.onPointPositionsChanged(e)})},e.prototype.render=function(){var e=this.camera.position.clone();e.x+=1,e.y+=1,this.light.position.set(e.x,e.y,e.z);var t=this.camera instanceof r.PerspectiveCamera?a.CameraType.Perspective:a.CameraType.Orthographic,i=[0,0];null!=this.worldSpacePointPositions&&(i=l.getNearFarPoints(this.worldSpacePointPositions,this.camera.position,this.orbitCameraControls.target));var o=new a.RenderContext(this.camera,t,this.orbitCameraControls.target,this.width,this.height,i[0],i[1],this.styles.backgroundColor,this.pointColors,this.pointScaleFactors,this.labels,this.polylineColors,this.polylineOpacities,this.polylineWidths);this.visualizers.forEach(function(e){return e.onPickingRender(o)});var n=this.remove3dAxesFromScene();this.renderer.setRenderTarget(this.pickingTexture),this.renderer.render(this.scene,this.camera),null!=n&&this.scene.add(n),this.visualizers.forEach(function(e){return e.onRender(o)}),this.renderer.setRenderTarget(null),this.renderer.render(this.scene,this.camera)},e.prototype.setPointColors=function(e){this.pointColors=e},e.prototype.setPointScaleFactors=function(e){this.pointScaleFactors=e},e.prototype.setLabels=function(e){this.labels=e},e.prototype.setPolylineColors=function(e){this.polylineColors=e},e.prototype.setPolylineOpacities=function(e){this.polylineOpacities=e},e.prototype.setPolylineWidths=function(e){this.polylineWidths=e},e.prototype.resetZoom=function(){this.recreateCamera(this.makeDefaultCameraDef(this.dimensions)),this.render()},e.prototype.setDayNightMode=function(e){for(var t=this.container.querySelectorAll("canvas"),i=e?"invert(100%)":"",o=0;o<t.length;o++)t[o].style.filter=i},e.prototype.resize=function(e){void 0===e&&(e=!0);var t=n([this.width,this.height],2),i=t[0],o=t[1],s=n(this.computeLayoutValues(),2),a=s[0],l=s[1];if(3===this.dimensions){(c=this.camera).aspect=a/l,c.updateProjectionMatrix()}else{var c=this.camera,h=a/i,u=l/o,p=(c.right-c.left)*h/2,d=(c.top-c.bottom)*u/2;c.top=d,c.bottom=-d,c.left=-p,c.right=p,c.updateProjectionMatrix()}var f=window.devicePixelRatio||1;this.renderer.setPixelRatio(f),this.renderer.setSize(a,l);var m=new r.Vector2;this.renderer.getSize(m);var v=this.renderer.getPixelRatio();this.pickingTexture=new r.WebGLRenderTarget(m.width*v,m.height*v),this.pickingTexture.texture.minFilter=r.LinearFilter,this.visualizers.forEach(function(e){return e.onResize(a,l)}),e&&this.render()},e.prototype.onCameraMove=function(e){this.onCameraMoveListeners.push(e)},e.prototype.clickOnPoint=function(e){this.nearestPoint=e,this.onClick(null,!1)},e}();t.ScatterPlot=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(8);t.OrbitControls=o},function(e,t,i){var o=i(0);o.OrbitControls=function(e,t){var i,n,r,s,a;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new o.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:o.MOUSE.LEFT,MIDDLE:o.MOUSE.MIDDLE,RIGHT:o.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.saveState=function(){l.target0.copy(l.target),l.position0.copy(l.object.position),l.zoom0=l.object.zoom},this.reset=function(){l.target.copy(l.target0),l.object.position.copy(l.position0),l.object.zoom=l.zoom0,l.object.updateProjectionMatrix(),l.dispatchEvent(c),l.update(),d=p.NONE},this.update=(i=new o.Vector3,n=(new o.Quaternion).setFromUnitVectors(e.up,new o.Vector3(0,1,0)),r=n.clone().inverse(),s=new o.Vector3,a=new o.Quaternion,function(){var e=l.object.position;return i.copy(e).sub(l.target),i.applyQuaternion(n),m.setFromVector3(i),l.autoRotate&&d===p.NONE&&L(2*Math.PI/60/60*l.autoRotateSpeed),m.theta+=v.theta,m.phi+=v.phi,m.theta=Math.max(l.minAzimuthAngle,Math.min(l.maxAzimuthAngle,m.theta)),m.phi=Math.max(l.minPolarAngle,Math.min(l.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=y,m.radius=Math.max(l.minDistance,Math.min(l.maxDistance,m.radius)),l.target.add(g),i.setFromSpherical(m),i.applyQuaternion(r),e.copy(l.target).add(i),l.object.lookAt(l.target),!0===l.enableDamping?(v.theta*=1-l.dampingFactor,v.phi*=1-l.dampingFactor,g.multiplyScalar(1-l.dampingFactor)):(v.set(0,0,0),g.set(0,0,0)),y=1,!!(b||s.distanceToSquared(l.object.position)>f||8*(1-a.dot(l.object.quaternion))>f)&&(l.dispatchEvent(c),s.copy(l.object.position),a.copy(l.object.quaternion),b=!1,!0)}),this.dispose=function(){l.domElement.removeEventListener("contextmenu",q,!1),l.domElement.removeEventListener("mousedown",V,!1),l.domElement.removeEventListener("wheel",H,!1),l.domElement.removeEventListener("touchstart",Y,!1),l.domElement.removeEventListener("touchend",G,!1),l.domElement.removeEventListener("touchmove",X,!1),document.removeEventListener("mousemove",U,!1),document.removeEventListener("mouseup",B,!1),window.removeEventListener("keydown",j,!1)};var l=this,c={type:"change"},h={type:"start"},u={type:"end"},p={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},d=p.NONE,f=1e-6,m=new o.Spherical,v=new o.Spherical,y=1,g=new o.Vector3,b=!1,P=new o.Vector2,C=new o.Vector2,S=new o.Vector2,E=new o.Vector2,w=new o.Vector2,M=new o.Vector2,x=new o.Vector2,T=new o.Vector2,A=new o.Vector2;function _(){return Math.pow(.95,l.zoomSpeed)}function L(e){v.theta-=e}function k(e){v.phi-=e}var z,R=(z=new o.Vector3,function(e,t){z.setFromMatrixColumn(t,0),z.multiplyScalar(-e),g.add(z)}),O=function(){var e=new o.Vector3;return function(t,i){!0===l.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(l.object.up,e)),e.multiplyScalar(t),g.add(e)}}(),N=function(){var e=new o.Vector3;return function(t,i){var o=l.domElement===document?l.domElement.body:l.domElement;if(l.object.isPerspectiveCamera){var n=l.object.position;e.copy(n).sub(l.target);var r=e.length();r*=Math.tan(l.object.fov/2*Math.PI/180),R(2*t*r/o.clientHeight,l.object.matrix),O(2*i*r/o.clientHeight,l.object.matrix)}else l.object.isOrthographicCamera?(R(t*(l.object.right-l.object.left)/l.object.zoom/o.clientWidth,l.object.matrix),O(i*(l.object.top-l.object.bottom)/l.object.zoom/o.clientHeight,l.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),l.enablePan=!1)}}();function I(e){l.object.isPerspectiveCamera?y/=e:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom*e)),l.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function F(e){l.object.isPerspectiveCamera?y*=e:l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom/e)),l.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function D(e){E.set(e.clientX,e.clientY)}function V(e){if(!1!==l.enabled){switch(e.preventDefault(),l.domElement.focus?l.domElement.focus():window.focus(),e.button){case l.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===l.enablePan)return;D(e),d=p.PAN}else{if(!1===l.enableRotate)return;!function(e){P.set(e.clientX,e.clientY)}(e),d=p.ROTATE}break;case l.mouseButtons.MIDDLE:if(!1===l.enableZoom)return;!function(e){x.set(e.clientX,e.clientY)}(e),d=p.DOLLY;break;case l.mouseButtons.RIGHT:if(!1===l.enablePan)return;D(e),d=p.PAN}d!==p.NONE&&(document.addEventListener("mousemove",U,!1),document.addEventListener("mouseup",B,!1),l.dispatchEvent(h))}}function U(e){if(!1!==l.enabled)switch(e.preventDefault(),d){case p.ROTATE:if(!1===l.enableRotate)return;!function(e){C.set(e.clientX,e.clientY),S.subVectors(C,P).multiplyScalar(l.rotateSpeed);var t=l.domElement===document?l.domElement.body:l.domElement;L(2*Math.PI*S.x/t.clientHeight),k(2*Math.PI*S.y/t.clientHeight),P.copy(C),l.update()}(e);break;case p.DOLLY:if(!1===l.enableZoom)return;!function(e){T.set(e.clientX,e.clientY),A.subVectors(T,x),A.y>0?I(_()):A.y<0&&F(_()),x.copy(T),l.update()}(e);break;case p.PAN:if(!1===l.enablePan)return;!function(e){w.set(e.clientX,e.clientY),M.subVectors(w,E).multiplyScalar(l.panSpeed),N(M.x,M.y),E.copy(w),l.update()}(e)}}function B(e){!1!==l.enabled&&(document.removeEventListener("mousemove",U,!1),document.removeEventListener("mouseup",B,!1),l.dispatchEvent(u),d=p.NONE)}function H(e){!1===l.enabled||!1===l.enableZoom||d!==p.NONE&&d!==p.ROTATE||(e.preventDefault(),e.stopPropagation(),l.dispatchEvent(h),function(e){e.deltaY<0?F(_()):e.deltaY>0&&I(_()),l.update()}(e),l.dispatchEvent(u))}function j(e){!1!==l.enabled&&!1!==l.enableKeys&&!1!==l.enablePan&&function(e){var t=!1;switch(e.keyCode){case l.keys.UP:N(0,l.keyPanSpeed),t=!0;break;case l.keys.BOTTOM:N(0,-l.keyPanSpeed),t=!0;break;case l.keys.LEFT:N(l.keyPanSpeed,0),t=!0;break;case l.keys.RIGHT:N(-l.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),l.update())}(e)}function Y(e){if(!1!==l.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===l.enableRotate)return;!function(e){P.set(e.touches[0].pageX,e.touches[0].pageY)}(e),d=p.TOUCH_ROTATE;break;case 2:if(!1===l.enableZoom&&!1===l.enablePan)return;!function(e){if(l.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+i*i);x.set(0,o)}if(l.enablePan){var n=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);E.set(n,r)}}(e),d=p.TOUCH_DOLLY_PAN;break;default:d=p.NONE}d!==p.NONE&&l.dispatchEvent(h)}}function X(e){if(!1!==l.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===l.enableRotate)return;if(d!==p.TOUCH_ROTATE)return;!function(e){C.set(e.touches[0].pageX,e.touches[0].pageY),S.subVectors(C,P).multiplyScalar(l.rotateSpeed);var t=l.domElement===document?l.domElement.body:l.domElement;L(2*Math.PI*S.x/t.clientHeight),k(2*Math.PI*S.y/t.clientHeight),P.copy(C),l.update()}(e);break;case 2:if(!1===l.enableZoom&&!1===l.enablePan)return;if(d!==p.TOUCH_DOLLY_PAN)return;!function(e){if(l.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+i*i);T.set(0,o),A.set(0,Math.pow(T.y/x.y,l.zoomSpeed)),I(A.y),x.copy(T)}if(l.enablePan){var n=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(n,r),M.subVectors(w,E).multiplyScalar(l.panSpeed),N(M.x,M.y),E.copy(w)}l.update()}(e);break;default:d=p.NONE}}function G(e){!1!==l.enabled&&(l.dispatchEvent(u),d=p.NONE)}function q(e){!1!==l.enabled&&e.preventDefault()}l.domElement.addEventListener("contextmenu",q,!1),l.domElement.addEventListener("mousedown",V,!1),l.domElement.addEventListener("wheel",H,!1),l.domElement.addEventListener("touchstart",Y,!1),l.domElement.addEventListener("touchend",G,!1),l.domElement.addEventListener("touchmove",X,!1),window.addEventListener("keydown",j,!1),this.update()},o.OrbitControls.prototype=Object.create(o.EventDispatcher.prototype),o.OrbitControls.prototype.constructor=o.OrbitControls,Object.defineProperties(o.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),e.exports=t.default=o.OrbitControls},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t,i){this.startCoordinates=[0,0],this.svgElement=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgElement.style.display="none",this.svgElement.style.height="100%",this.svgElement.style.width="100%",this.svgElement.style.position="absolute",e.insertAdjacentElement("afterbegin",this.svgElement),this.rectElement=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.rectElement.style.stroke=i.select.stroke,this.rectElement.style.strokeDasharray=i.select.strokeDashArray,this.rectElement.style.strokeWidth=""+i.select.strokeWidth,this.rectElement.style.fill=i.select.fill,this.rectElement.style.fillOpacity=""+i.select.fillOpacity,this.svgElement.appendChild(this.rectElement),this.selectionCallback=t,this.isMouseDown=!1}return e.prototype.onMouseDown=function(e,t){this.isMouseDown=!0,this.rectElement.style.display="block",this.svgElement.style.display="block",this.startCoordinates=[e,t],this.lastBoundingBox={x:this.startCoordinates[0],y:this.startCoordinates[1],width:1,height:1}},e.prototype.onMouseMove=function(e,t){this.isMouseDown&&(this.lastBoundingBox.x=Math.min(e,this.startCoordinates[0]),this.lastBoundingBox.y=Math.max(t,this.startCoordinates[1]),this.lastBoundingBox.width=Math.max(e,this.startCoordinates[0])-this.lastBoundingBox.x,this.lastBoundingBox.height=this.lastBoundingBox.y-Math.min(t,this.startCoordinates[1]),this.rectElement.setAttribute("x",""+this.lastBoundingBox.x),this.rectElement.setAttribute("y",""+(this.lastBoundingBox.y-this.lastBoundingBox.height)),this.rectElement.setAttribute("width",""+this.lastBoundingBox.width),this.rectElement.setAttribute("height",""+this.lastBoundingBox.height))},e.prototype.onMouseUp=function(){this.isMouseDown=!1,this.svgElement.style.display="none",this.rectElement.style.display="none",this.rectElement.setAttribute("width","0"),this.rectElement.setAttribute("height","0"),this.selectionCallback(this.lastBoundingBox)},e}();t.ScatterPlotRectangleSelector=o},function(e,t,i){"use strict";var o=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var n="Points must be an array of either 2 or 3 dimensional number arrays",r=function(){function e(e,t){var i,r;void 0===t&&(t=[]),this.points=e,this.metadata=t;var s=e[0].length;if(2!==s&&3!==s)throw new Error(n);try{for(var a=o(e),l=a.next();!l.done;l=a.next()){if(s!==l.value.length)throw new Error(n)}}catch(e){i={error:e}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}this.dimensions=s}return e.prototype.setSpriteMetadata=function(e){this.spriteMetadata=e},e}();t.Dataset=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={backgroundColor:"#ffffff",axesVisible:!0,fog:{color:"#ffffff",enabled:!0,threshold:5e3},label:{fontSize:10,scaleDefault:1,scaleLarge:2,fillColorSelected:"#000000",fillColorHover:"#000000",strokeColorSelected:"#ffffff",strokeColorHover:"#ffffff",strokeWidth:3,fillWidth:6},label3D:{fontSize:80,scale:2.2,color:"black",backgroundColor:"#ffffff",colorUnselected:"#ffffff",colorNoSelection:"#ffffff"},point:{colorUnselected:"#e3e3e3",colorNoSelection:"#7575d9",colorSelected:"#fa6666",colorHover:"#760b4f",scaleDefault:1,scaleSelected:1.2,scaleHover:1.2},polyline:{startHue:60,endHue:360,saturation:1,lightness:.3,defaultOpacity:.2,defaultLineWidth:2,selectedOpacity:.9,selectedLineWidth:3,deselectedOpacity:.05},select:{fill:"#dddddd",fillOpacity:.2,stroke:"#aaaaaa",strokeWidth:2,strokeDashArray:"10 5"},sprites:{minPointSize:5,imageSize:30,colorUnselected:"#ffffff",colorNoSelection:"#ffffff"}};t.makeStyles=function(e){if(void 0===e)return o;for(var t in o){var i=t;"object"==typeof o[i]&&"object"==typeof e[i]?o[i]=Object.assign(o[i],e[i]):void 0!==e[i]&&(o[i]=e[i])}return o};var n="#FFFFFF";t.parseColor=function(e){if("number"!=typeof e)return n}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),n=i(1),r=i(3),s=function(e,t){return"\n      attribute vec2 posObj;\n      attribute vec3 color;\n      varying vec2 vUv;\n      varying vec3 vColor;\n\n      void main() {\n        vUv = uv;\n        vColor = color;\n\n        // Rotate label to face camera.\n\n        vec4 vRight = vec4(\n          modelViewMatrix[0][0], modelViewMatrix[1][0], modelViewMatrix[2][0], 0);\n\n        vec4 vUp = vec4(\n          modelViewMatrix[0][1], modelViewMatrix[1][1], modelViewMatrix[2][1], 0);\n\n        vec4 vAt = -vec4(\n          modelViewMatrix[0][2], modelViewMatrix[1][2], modelViewMatrix[2][2], 0);\n\n        mat4 pointToCamera = mat4(vRight, vUp, vAt, vec4(0, 0, 0, 1));\n\n        vec2 scaledPos = posObj * "+1/e+" * "+t+";\n\n        vec4 posRotated = pointToCamera * vec4(scaledPos, 0, 1);\n        vec4 mvPosition = modelViewMatrix * (vec4(position, 0) + posRotated);\n        gl_Position = projectionMatrix * mvPosition;\n      }"},a=function(){function e(e){this.styles=e,this.id="3D_LABELS",this.labelStrings=[],this.worldSpacePointPositions=new Float32Array,this.pickingColors=new Float32Array,this.renderColors=new Float32Array,this.uniforms={},this.totalVertexCount=0,this.labelVertexMap=[]}return e.prototype.createGlyphTexture=function(){var e=this.styles.label3D,t=e.fontSize,i=e.backgroundColor,o=e.color,r=document.createElement("canvas");r.width=8192,r.height=t;var s=r.getContext("2d");s.font="bold "+t+"px roboto",s.textBaseline="top",s.fillStyle=i,s.rect(0,0,r.width,r.height),s.fill(),s.fillStyle=o;for(var a=s.measureText(" ").width,l=new Float32Array(256),c=new Float32Array(256),h=0,u=0;u<256;u++){var p=" "+String.fromCharCode(u),d=s.measureText(p).width;l[u]=d-a,c[u]=h,s.fillText(p,h-a,0),h+=d}return{texture:n.createTextureFromCanvas(r),lengths:l,offsets:c}},e.prototype.processLabelVerts=function(e){var t=0;this.labelVertexMap=[];for(var i=0;i<e;i++){for(var o=this.labelStrings[i],n=[],r=0;r<o.length;r++){for(var s=0;s<6;s++)n.push(6*t+s);t++}this.labelVertexMap.push(n)}this.totalVertexCount=6*t},e.prototype.createColorBuffers=function(e){var t=this;this.pickingColors=new Float32Array(this.totalVertexCount*r.RGB_NUM_ELEMENTS),this.renderColors=new Float32Array(this.totalVertexCount*r.RGB_NUM_ELEMENTS);for(var i=function(e){var i=new o.Color(e);n.labelVertexMap[e].forEach(function(e){t.pickingColors[r.RGB_NUM_ELEMENTS*e]=i.r,t.pickingColors[r.RGB_NUM_ELEMENTS*e+1]=i.g,t.pickingColors[r.RGB_NUM_ELEMENTS*e+2]=i.b,t.renderColors[r.RGB_NUM_ELEMENTS*e]=1,t.renderColors[r.RGB_NUM_ELEMENTS*e+1]=1,t.renderColors[r.RGB_NUM_ELEMENTS*e+2]=1})},n=this,s=0;s<e;s++)i(s)},e.prototype.createLabels=function(){var e=this,t=this.styles.label3D,i=t.fontSize,a=t.scale;if(null!=this.labelStrings&&null!=this.worldSpacePointPositions){var l=this.worldSpacePointPositions.length/r.XYZ_NUM_ELEMENTS;if(l===this.labelStrings.length){this.glyphTexture=this.createGlyphTexture(),this.uniforms={texture:{type:"t"},picking:{type:"bool"}},this.material=new o.ShaderMaterial({uniforms:this.uniforms,transparent:!0,vertexShader:s(i,a),fragmentShader:"\n      uniform sampler2D texture;\n      uniform bool picking;\n      varying vec2 vUv;\n      varying vec3 vColor;\n\n      void main() {\n        if (picking) {\n          gl_FragColor = vec4(vColor, 1.0);\n        } else {\n          vec4 fromTexture = texture2D(texture, vUv);\n          gl_FragColor = vec4(vColor, 1.0) * fromTexture;\n        }\n      }"}),this.processLabelVerts(l),this.createColorBuffers(l);var c=new Float32Array(this.totalVertexCount*r.XYZ_NUM_ELEMENTS);this.positions=new o.BufferAttribute(c,r.XYZ_NUM_ELEMENTS);var h=new Float32Array(this.totalVertexCount*r.XYZ_NUM_ELEMENTS),u=new Float32Array(this.totalVertexCount*r.UV_NUM_ELEMENTS),p=new Float32Array(this.totalVertexCount*r.RGB_NUM_ELEMENTS),d=new o.BufferAttribute(h,2),f=new o.BufferAttribute(u,r.UV_NUM_ELEMENTS),m=new o.BufferAttribute(p,r.RGB_NUM_ELEMENTS);this.geometry=new o.BufferGeometry,this.geometry.addAttribute("posObj",d),this.geometry.addAttribute("position",this.positions),this.geometry.addAttribute("uv",f),this.geometry.addAttribute("color",m);for(var v=0,y=0;y<l;y++){for(var g=this.labelStrings[y],b=0,P=0;P<g.length;P++){var C=g.charCodeAt(P);b+=this.glyphTexture.lengths[C]}b/=-2;for(P=0;P<g.length;P++){C=g.charCodeAt(P);var S=this.glyphTexture.lengths[C],E=(b+S)/i,w=b/i,M=i/i;d.setXY(6*v+0,w,0),d.setXY(6*v+1,E,0),d.setXY(6*v+2,w,M),d.setXY(6*v+3,w,M),d.setXY(6*v+4,E,0),d.setXY(6*v+5,E,M);var x=this.glyphTexture.offsets[C],T=this.glyphTexture.offsets[C]+S;x/=8192,T/=8192;f.setXY(6*v+0,x,1),f.setXY(6*v+1,T,1),f.setXY(6*v+2,x,0),f.setXY(6*v+3,x,0),f.setXY(6*v+4,T,1),f.setXY(6*v+5,T,0),v++,b+=S}}var A=function(t){var i=n.vector3FromPackedArray(_.worldSpacePointPositions,t);_.labelVertexMap[t].forEach(function(t){e.positions.setXYZ(t,i.x,i.y,i.z)})},_=this;for(y=0;y<l;y++)A(y);this.labelsMesh=new o.Mesh(this.geometry,this.material),this.labelsMesh.frustumCulled=!1,this.scene.add(this.labelsMesh)}}},e.prototype.colorLabels=function(e){if(null!=this.labelStrings&&null!=this.geometry&&null!=e){var t=this.geometry.getAttribute("color");t.array=this.renderColors;for(var i=e.length/r.XYZ_NUM_ELEMENTS,n=0,s=0;s<i;++s){for(var a=new o.Color(e[n],e[n+1],e[n+2]),l=this.labelVertexMap[s].length,c=0;c<l;++c)t.setXYZ(this.labelVertexMap[s][c],a.r,a.g,a.b);n+=r.RGB_NUM_ELEMENTS}t.needsUpdate=!0}},e.prototype.setScene=function(e){this.scene=e},e.prototype.dispose=function(){this.labelsMesh&&(this.scene&&this.scene.remove(this.labelsMesh),this.labelsMesh=null),this.geometry&&(this.geometry.dispose(),this.geometry=null),null!=this.glyphTexture&&null!=this.glyphTexture.texture&&(this.glyphTexture.texture.dispose(),this.glyphTexture.texture=null)},e.prototype.onPickingRender=function(e){if(null!=this.geometry){this.material.uniforms.texture.value=this.glyphTexture.texture,this.material.uniforms.picking.value=!0;var t=this.geometry.getAttribute("color");t.array=this.pickingColors,t.needsUpdate=!0}else this.createLabels()},e.prototype.onRender=function(e){if(null!=this.geometry){this.colorLabels(e.pointColors),this.material.uniforms.texture.value=this.glyphTexture.texture,this.material.uniforms.picking.value=!1;var t=this.geometry.getAttribute("color");t.array=this.renderColors,t.needsUpdate=!0}else this.createLabels()},e.prototype.onPointPositionsChanged=function(e){this.worldSpacePointPositions=e,this.dispose()},e.prototype.setLabelStrings=function(e){this.labelStrings=e,this.dispose()},e.prototype.onResize=function(e,t){},e}();t.ScatterPlotVisualizer3DLabels=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i(0),n=i(2),r=i(1),s=i(3),a=function(e){return"\n    // Index of the specific vertex (passed in as bufferAttribute), and the\n    // variable that will be used to pass it to the fragment shader.\n    attribute float spriteIndex;\n    attribute vec3 color;\n    attribute float scaleFactor;\n\n    varying vec2 xyIndex;\n    varying vec3 vColor;\n\n    uniform bool sizeAttenuation;\n    uniform float pointSize;\n    uniform float spritesPerRow;\n    uniform float spritesPerColumn;\n\n    varying float fogDepth;\n\n    void main() {\n      // Pass index and color values to fragment shader.\n      vColor = color;\n      xyIndex = vec2(mod(spriteIndex, spritesPerRow),\n                floor(spriteIndex / spritesPerColumn));\n\n      // Transform current vertex by modelViewMatrix (model world position and\n      // camera world position matrix).\n      vec4 cameraSpacePos = modelViewMatrix * vec4(position, 1.0);\n\n      // Project vertex in camera-space to screen coordinates using the camera's\n      // projection matrix.\n      gl_Position = projectionMatrix * cameraSpacePos;\n\n      // Create size attenuation (if we're in 3D mode) by making the size of\n      // each point inversly proportional to its distance to the camera.\n      float outputPointSize = pointSize;\n      if (sizeAttenuation) {\n        outputPointSize = -pointSize / cameraSpacePos.z;\n        fogDepth = pointSize / outputPointSize * 1.2;\n      } else {  // Create size attenuation (if we're in 2D mode)\n        const float PI = 3.1415926535897932384626433832795;\n        const float minScale = 0.1;  // minimum scaling factor\n        const float outSpeed = 2.0;  // shrink speed when zooming out\n        const float outNorm = (1. - minScale) / atan(outSpeed);\n        const float maxScale = 15.0;  // maximum scaling factor\n        const float inSpeed = 0.02;  // enlarge speed when zooming in\n        const float zoomOffset = 0.3;  // offset zoom pivot\n        float zoom = projectionMatrix[0][0] + zoomOffset;  // zoom pivot\n        float scale = zoom < 1. ? 1. + outNorm * atan(outSpeed * (zoom - 1.)) :\n                      1. + 2. / PI * (maxScale - 1.) * atan(inSpeed * (zoom - 1.));\n        outputPointSize = pointSize * scale;\n      }\n\n      gl_PointSize =\n        max(outputPointSize * scaleFactor, "+e.toFixed(1)+");\n    }"},l="\n    bool point_in_unit_circle(vec2 spriteCoord) {\n      vec2 centerToP = spriteCoord - vec2(0.5, 0.5);\n      return dot(centerToP, centerToP) < (0.5 * 0.5);\n    }\n\n    bool point_in_unit_equilateral_triangle(vec2 spriteCoord) {\n      vec3 v0 = vec3(0, 1, 0);\n      vec3 v1 = vec3(0.5, 0, 0);\n      vec3 v2 = vec3(1, 1, 0);\n      vec3 p = vec3(spriteCoord, 0);\n      float p_in_v0_v1 = cross(v1 - v0, p - v0).z;\n      float p_in_v1_v2 = cross(v2 - v1, p - v1).z;\n      return (p_in_v0_v1 > 0.0) && (p_in_v1_v2 > 0.0);\n    }\n\n    bool point_in_unit_square(vec2 spriteCoord) {\n      return true;\n    }\n  ",c="\n    varying vec2 xyIndex;\n    varying vec3 vColor;\n\n    uniform sampler2D texture;\n    uniform float spritesPerRow;\n    uniform float spritesPerColumn;\n    uniform bool isImage;\n\n    "+o.ShaderChunk.common+"\n    "+l+"\n    uniform vec3 fogColor;\n    varying float fogDepth;\n\t\tuniform float fogNear;\n    uniform float fogFar;\n\n    void main() {\n      if (isImage) {\n        // Coordinates of the vertex within the entire sprite image.\n        vec2 coords =\n          (gl_PointCoord + xyIndex) / vec2(spritesPerRow, spritesPerColumn);\n        gl_FragColor = vec4(vColor, 1.0) * texture2D(texture, coords);\n      } else {\n        bool inside = point_in_unit_circle(gl_PointCoord);\n        if (!inside) {\n          discard;\n        }\n        gl_FragColor = vec4(vColor, 1);\n      }\n      float fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n      gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n    }",h=function(){function e(e,t){this.styles=e,this.id="SPRITES",this.isSpriteSheetMode=!1,this.spritesPerRow=0,this.spritesPerColumn=0,this.spriteDimensions=[0,0],this.worldSpacePointPositions=new Float32Array,this.pickingColors=new Float32Array,this.renderColors=new Float32Array,this.standinTextureForPoints=r.createTextureFromCanvas(document.createElement("canvas")),t&&(this.spriteSheetParams=t,this.setSpriteSheet(t),this.isSpriteSheetMode=!0),this.renderMaterial=this.createRenderMaterial(),this.pickingMaterial=this.createPickingMaterial()}return e.prototype.createUniforms=function(){return{texture:{type:"t"},spritesPerRow:{type:"f"},spritesPerColumn:{type:"f"},fogColor:{type:"c"},fogNear:{type:"f"},fogFar:{type:"f"},isImage:{type:"bool"},sizeAttenuation:{type:"bool"},pointSize:{type:"f"}}},e.prototype.createRenderMaterial=function(){var e=this.isSpriteSheetMode,t=this.createUniforms();return new o.ShaderMaterial({uniforms:t,vertexShader:a(this.styles.sprites.minPointSize),fragmentShader:c,transparent:!e,depthTest:e,depthWrite:e,fog:this.styles.fog.enabled,blending:o.MultiplyBlending})},e.prototype.createPickingMaterial=function(){var e=this.createUniforms();return new o.ShaderMaterial({uniforms:e,vertexShader:a(this.styles.sprites.minPointSize),fragmentShader:"\n    varying vec2 xyIndex;\n    varying vec3 vColor;\n    uniform bool isImage;\n\n    \n    bool point_in_unit_circle(vec2 spriteCoord) {\n      vec2 centerToP = spriteCoord - vec2(0.5, 0.5);\n      return dot(centerToP, centerToP) < (0.5 * 0.5);\n    }\n\n    bool point_in_unit_equilateral_triangle(vec2 spriteCoord) {\n      vec3 v0 = vec3(0, 1, 0);\n      vec3 v1 = vec3(0.5, 0, 0);\n      vec3 v2 = vec3(1, 1, 0);\n      vec3 p = vec3(spriteCoord, 0);\n      float p_in_v0_v1 = cross(v1 - v0, p - v0).z;\n      float p_in_v1_v2 = cross(v2 - v1, p - v1).z;\n      return (p_in_v0_v1 > 0.0) && (p_in_v1_v2 > 0.0);\n    }\n\n    bool point_in_unit_square(vec2 spriteCoord) {\n      return true;\n    }\n  \n\n    varying float fogDepth;\n\n    void main() {\n      xyIndex; // Silence 'unused variable' warning.\n      fogDepth; // Silence 'unused variable' warning.\n      if (isImage) {\n        gl_FragColor = vec4(vColor, 1);\n      } else {\n        bool inside = point_in_unit_circle(gl_PointCoord);\n        if (!inside) {\n          discard;\n        }\n        gl_FragColor = vec4(vColor, 1);\n      }\n    }",transparent:!0,depthTest:!0,depthWrite:!0,fog:!1,blending:o.NormalBlending})},e.prototype.createPointSprites=function(e,t){var i=null!=t?t.length/s.XYZ_NUM_ELEMENTS:0,n=this.createGeometry(i);this.fog=new o.Fog(16777215),this.points=new o.Points(n,this.renderMaterial),this.points.frustumCulled=!1,null!=this.spriteIndexBufferAttribute&&this.points.geometry.addAttribute("spriteIndex",this.spriteIndexBufferAttribute),e.add(this.points)},e.prototype.calculatePointSize=function(e){var t=this.styles.sprites.imageSize;if(this.texture)return e?t:this.spriteDimensions[0];var i=null!=this.worldSpacePointPositions?this.worldSpacePointPositions.length/s.XYZ_NUM_ELEMENTS:1,o=200/Math.log(i)/Math.log(8);return e?o:o/1.5},e.prototype.createGeometry=function(e){var t=e;this.pickingColors=new Float32Array(t*s.RGB_NUM_ELEMENTS);for(var i=0,n=0;n<t;n++){var r=new o.Color(n);this.pickingColors[i++]=r.r,this.pickingColors[i++]=r.g,this.pickingColors[i++]=r.b}var a=new o.BufferGeometry;return a.addAttribute("position",new o.BufferAttribute(new Float32Array([]),s.XYZ_NUM_ELEMENTS)),a.addAttribute("color",new o.BufferAttribute(new Float32Array([]),s.RGB_NUM_ELEMENTS)),a.addAttribute("scaleFactor",new o.BufferAttribute(new Float32Array([]),s.INDEX_NUM_ELEMENTS)),a.computeVertexNormals(),a},e.prototype.setFogDistances=function(e,t,i){var o=this.styles.fog,n=o.threshold,r=o.enabled;if(e&&r){var a=this.worldSpacePointPositions.length/s.XYZ_NUM_ELEMENTS;this.fog.near=t;var l=2-Math.min(a,n)/n;this.fog.far=i*l}else this.fog.near=1/0,this.fog.far=1/0},e.prototype.dispose=function(){this.disposeGeometry(),this.disposeSpriteSheet()},e.prototype.disposeGeometry=function(){null!=this.points&&(this.scene.remove(this.points),this.points.geometry.dispose(),this.points=null,this.worldSpacePointPositions=null)},e.prototype.disposeSpriteSheet=function(){this.texture&&this.texture.dispose(),this.texture=null,this.renderMaterial=null,this.pickingMaterial=null,this.spriteSheetImage=null},e.prototype.setScene=function(e){this.scene=e},e.prototype.setSpriteSheet=function(e){var t=this,i=e.spriteDimensions,n=e.spriteIndices,a=e.onImageLoad,l=e.spritesheetImage;if("string"==typeof l){var c=l;(l=new Image).src=c}this.spriteSheetImage=l,this.texture=r.createTextureFromImage(this.spriteSheetImage,function(){t.spritesPerRow=t.spriteSheetImage.width/i[0],t.spritesPerColumn=t.spriteSheetImage.height/i[1],a()}),this.spriteDimensions=i,this.spriteIndexBufferAttribute=new o.BufferAttribute(n,s.INDEX_NUM_ELEMENTS),null!=this.points&&this.points.geometry.addAttribute("spriteIndex",this.spriteIndexBufferAttribute)},e.prototype.onPointPositionsChanged=function(e){null!=this.points&&this.worldSpacePointPositions.length!==e.length&&this.disposeGeometry(),this.worldSpacePointPositions=e,null==this.points&&this.createPointSprites(this.scene,e),this.spriteSheetParams&&this.setSpriteSheet(this.spriteSheetParams),this.renderMaterial=this.createRenderMaterial(),this.pickingMaterial=this.createPickingMaterial();var t=this.points.geometry.getAttribute("position");t.array=e,t.count=e.length/s.XYZ_NUM_ELEMENTS,t.needsUpdate=!0},e.prototype.onPickingRender=function(e){var t=e.cameraType===n.CameraType.Perspective;this.pickingMaterial.uniforms.spritesPerRow.value=this.spritesPerRow,this.pickingMaterial.uniforms.spritesPerRow.value=this.spritesPerColumn,this.pickingMaterial.uniforms.sizeAttenuation.value=t,this.pickingMaterial.uniforms.pointSize.value=this.calculatePointSize(t),this.points.material=this.pickingMaterial;var i=this.points.geometry.getAttribute("color");i.array=this.pickingColors,i.count=this.pickingColors.length/s.RGB_NUM_ELEMENTS,i.needsUpdate=!0;var o=this.points.geometry.getAttribute("scaleFactor");o.array=e.pointScaleFactors,o.count=e.pointScaleFactors.length,o.count=e.pointScaleFactors.length/s.INDEX_NUM_ELEMENTS,o.needsUpdate=!0},e.prototype.onRender=function(e){var t=e.camera instanceof o.PerspectiveCamera;this.setFogDistances(t,e.nearestCameraSpacePointZ,e.farthestCameraSpacePointZ),this.scene.fog=this.fog,this.scene.fog.color=new o.Color(e.backgroundColor),this.renderMaterial.uniforms.fogColor.value=this.scene.fog.color,this.renderMaterial.uniforms.fogNear.value=this.fog.near,this.renderMaterial.uniforms.fogFar.value=this.fog.far,this.renderMaterial.uniforms.spritesPerRow.value=this.spritesPerRow,this.renderMaterial.uniforms.spritesPerColumn.value=this.spritesPerColumn,this.renderMaterial.uniforms.isImage.value=null!=this.texture,this.renderMaterial.uniforms.texture.value=null!=this.texture?this.texture:this.standinTextureForPoints,this.renderMaterial.uniforms.sizeAttenuation.value=t,this.renderMaterial.uniforms.pointSize.value=this.calculatePointSize(t),this.points.material=this.renderMaterial;var i=this.points.geometry.getAttribute("color");this.renderColors=e.pointColors,i.array=this.renderColors,i.count=this.renderColors.length/s.RGB_NUM_ELEMENTS,i.needsUpdate=!0;var n=this.points.geometry.getAttribute("scaleFactor");n.array=e.pointScaleFactors,n.count=e.pointScaleFactors.length/s.INDEX_NUM_ELEMENTS,n.needsUpdate=!0},e.prototype.onResize=function(e,t){},e}();t.ScatterPlotVisualizerSprites=h},function(e,t,i){"use strict";var o=this&&this.__read||function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var o,n,r=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s};Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(2),s=i(15),a=i(1),l=function(){function e(e,t){this.styles=t,this.id="CANVAS_LABELS",this.worldSpacePointPositions=new Float32Array,this.labelsActive=!0,this.canvas=document.createElement("canvas"),e.appendChild(this.canvas),this.gc=this.canvas.getContext("2d"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.pointerEvents="none"}return e.prototype.removeAllLabels=function(){var e=this.canvas.width*window.devicePixelRatio,t=this.canvas.height*window.devicePixelRatio;this.gc.clearRect(0,0,e,t)},e.prototype.makeLabels=function(e){if(null!=e.labels&&0!==e.labels.pointIndices.length&&null!=this.worldSpacePointPositions){var t,i=e.labels,l=e.cameraType===r.CameraType.Perspective,c=parseInt(this.gc.font,10),h=window.devicePixelRatio,u=this.canvas.width*h,p=this.canvas.height*h,d={loX:0,hiX:u,loY:0,hiY:p};t=new s.CollisionGrid(d,u/25,p/50);var f=[e.farthestCameraSpacePointZ,e.nearestCameraSpacePointZ],m=function(e){return a.scaleExponential(e,f,[.1,1])},v=e.camera.position,y=v.clone().sub(e.cameraTarget),g=new n.Vector3;this.gc.textBaseline="middle",this.gc.miterLimit=2;for(var b=Math.min(1e4,i.pointIndices.length),P=0;P<b;++P){var C,S=i.pointIndices[P];if(C=a.vector3FromPackedArray(this.worldSpacePointPositions,S),g.copy(v).sub(C),!(y.dot(g)<0)){var E=o(a.vector3DToScreenCoords(e.camera,e.screenWidth,e.screenHeight,C),2),w=E[0],M=E[1],x={loX:(w+=4)-2,hiX:w+1+2,loY:M-c/2-2,hiY:M+c/2+2};if(t.insert(x,!0)){var T=i.labelStrings[P],A=i.defaultFontSize*i.scaleFactors[P]*h;if(this.gc.font=A+"px roboto",x.hiX+=this.gc.measureText(T).width-1,t.insert(x)){var _=1;l&&1===i.useSceneOpacityFlags[P]&&(_=m(g.length())),this.gc.fillStyle=this.styleStringFromPackedRgba(i.fillColors,P,_),this.gc.strokeStyle=this.styleStringFromPackedRgba(i.strokeColors,P,_),this.gc.lineWidth=this.styles.label.strokeWidth,this.gc.strokeText(T,w,M),this.gc.lineWidth=this.styles.label.fillWidth,this.gc.fillText(T,w,M)}}}}}},e.prototype.styleStringFromPackedRgba=function(e,t,i){var o=3*t;return"rgba("+e[o]+","+e[o+1]+","+e[o+2]+","+i+")"},e.prototype.onResize=function(e,t){var i=window.devicePixelRatio;this.canvas.width=e*i,this.canvas.height=t*i,this.canvas.style.width=e+"px",this.canvas.style.height=t+"px"},e.prototype.dispose=function(){this.removeAllLabels()},e.prototype.onPointPositionsChanged=function(e){this.worldSpacePointPositions=e,this.removeAllLabels()},e.prototype.onRender=function(e){this.labelsActive&&(this.removeAllLabels(),this.makeLabels(e))},e.prototype.setScene=function(e){},e.prototype.onPickingRender=function(e){},e}();t.ScatterPlotVisualizerCanvasLabels=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t,i){this.bound=e,this.cellWidth=t,this.cellHeight=i,this.numHorizCells=Math.ceil(this.boundWidth(e)/t),this.numVertCells=Math.ceil(this.boundHeight(e)/i),this.grid=new Array(this.numHorizCells*this.numVertCells)}return e.prototype.boundWidth=function(e){return e.hiX-e.loX},e.prototype.boundHeight=function(e){return e.hiY-e.loY},e.prototype.boundsIntersect=function(e,t){return!(e.loX>t.hiX||e.loY>t.hiY||e.hiX<t.loX||e.hiY<t.loY)},e.prototype.insert=function(e,t){if(void 0===t&&(t=!1),e.hiX<this.bound.loX||e.loX>this.bound.hiX||e.hiY<this.bound.loY||e.loY>this.bound.hiY)return!1;for(var i=this.getCellX(e.loX),o=this.getCellX(e.hiX),n=this.getCellY(e.loY),r=this.getCellY(e.hiY),s=n*this.numHorizCells+i,a=s,l=n;l<=r;l++){for(var c=i;c<=o;c++){var h=this.grid[a++];if(h)for(var u=0;u<h.length;u++)if(this.boundsIntersect(e,h[u]))return!1}a+=this.numHorizCells-(o-i+1)}if(t)return!0;a=s;for(l=n;l<=r;l++){for(c=i;c<=o;c++)this.grid[a]?this.grid[a].push(e):this.grid[a]=[e],a++;a+=this.numHorizCells-(o-i+1)}return!0},e.prototype.getCellX=function(e){return Math.floor((e-this.bound.loX)/this.cellWidth)},e.prototype.getCellY=function(e){return Math.floor((e-this.bound.loY)/this.cellHeight)},e}();t.CollisionGrid=o},function(e,t,i){"use strict";var o=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(1),s=i(3),a=function(){function e(){this.id="POLYLINES",this.sequences=[],this.polylines=[],this.polylinePositionBuffer={},this.polylineColorBuffer={},this.pointSequenceIndices=new Map}return e.prototype.getPointSequenceIndex=function(e){return this.pointSequenceIndices.get(e)},e.prototype.updateSequenceIndices=function(){for(var e=0;e<this.sequences.length;e++)for(var t=this.sequences[e],i=0;i<t.indices.length-1;i++){var o=t.indices[i];this.pointSequenceIndices.set(o,e),this.pointSequenceIndices.set(o+1,e)}},e.prototype.createPolylines=function(){this.updateSequenceIndices(),this.polylines=[];for(var e=0;e<this.sequences.length;e++){var t=new n.BufferGeometry;t.addAttribute("position",this.polylinePositionBuffer[e]),t.addAttribute("color",this.polylineColorBuffer[e]);var i=new n.LineBasicMaterial({linewidth:1,opacity:1,transparent:!0,vertexColors:n.VertexColors}),o=new n.LineSegments(t,i);o.frustumCulled=!1,this.polylines.push(o),this.scene.add(o)}},e.prototype.dispose=function(){var e,t;try{for(var i=o(this.polylines),n=i.next();!n.done;n=i.next()){var r=n.value;this.scene.remove(r),r.geometry.dispose()}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}this.polylines=[],this.polylinePositionBuffer={},this.polylineColorBuffer={}},e.prototype.setScene=function(e){this.scene=e},e.prototype.setSequences=function(e){this.sequences=e},e.prototype.onPointPositionsChanged=function(e){if(null==e&&this.dispose(),null!=e&&0!==this.sequences.length){for(var t=0;t<this.sequences.length;t++){var i=2*((l=this.sequences[t]).indices.length-1),o=new Float32Array(i*s.XYZ_NUM_ELEMENTS);this.polylinePositionBuffer[t]=new n.BufferAttribute(o,s.XYZ_NUM_ELEMENTS);var a=new Float32Array(i*s.RGB_NUM_ELEMENTS);this.polylineColorBuffer[t]=new n.BufferAttribute(a,s.RGB_NUM_ELEMENTS)}for(t=0;t<this.sequences.length;t++){for(var l=this.sequences[t],c=0,h=0;h<l.indices.length-1;h++){var u=l.indices[h],p=l.indices[h+1],d=r.vector3FromPackedArray(e,u),f=r.vector3FromPackedArray(e,p);this.polylinePositionBuffer[t].setXYZ(c,d.x,d.y,d.z),this.polylinePositionBuffer[t].setXYZ(c+1,f.x,f.y,f.z),c+=2}this.polylinePositionBuffer[t].needsUpdate=!0}this.createPolylines()}},e.prototype.onRender=function(e){for(var t=0;t<this.polylines.length;t++){var i=this.polylines[t].material;i.opacity=e.polylineOpacities[t],i.linewidth=e.polylineWidths[t],this.polylineColorBuffer[t].array=e.polylineColors[t],this.polylineColorBuffer[t].needsUpdate=!0}},e.prototype.onPickingRender=function(e){},e.prototype.onResize=function(e,t){},e}();t.ScatterPlotVisualizerPolylines=a}])});